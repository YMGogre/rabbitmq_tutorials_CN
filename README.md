# 0ã€å¼•è¨€

æƒ³è¦å®ç°ä¸¤ä¸ªåº”ç”¨ç¨‹åºä¹‹é—´çš„é€šä¿¡ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©â€œæ¶ˆæ¯é˜Ÿåˆ—â€æŠ€æœ¯ã€‚æœ¬æ–‡å°†ä»‹ç»ä½¿ç”¨ C# è¯­è¨€åœ¨ .NET ä¸‹å®ç° RabbitMQ æ¶ˆæ¯é˜Ÿåˆ—ï¼›å½“ç„¶æ— è®ºæ˜¯å“ªç§ç¼–ç¨‹è¯­è¨€æˆ–æ¡†æ¶ï¼Œè¦ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ï¼Œéƒ½éœ€è¦å®Œæˆä»¥ä¸‹ä¸¤ä¸ªåŸºæœ¬æ­¥éª¤ï¼š

1. ä¸‹è½½å¹¶å®‰è£…ç›¸åº”çš„æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡å™¨è½¯ä»¶ï¼Œå¹¶æ ¹æ®éœ€è¦è¿›è¡Œé…ç½®ï¼›
2. åœ¨æ‚¨çš„åº”ç”¨ç¨‹åºä»£ç ä¸­å¼•å…¥ç›¸åº”çš„æ¶ˆæ¯é˜Ÿåˆ—å®¢æˆ·ç«¯åº“ï¼Œå¹¶ä½¿ç”¨å®¢æˆ·ç«¯åº“æä¾›çš„APIæ¥å»ºç«‹ä¸æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡å™¨çš„è¿æ¥å¹¶è¿›è¡Œé€šä¿¡ã€‚

è¿™äº›æ­¥éª¤å¯¹äºå¤§å¤šæ•°æ¶ˆæ¯é˜Ÿåˆ—ä¸­é—´ä»¶éƒ½æ˜¯é€‚ç”¨çš„ã€‚ä¸åŒçš„æ¶ˆæ¯é˜Ÿåˆ—ä¸­é—´ä»¶å¯èƒ½æœ‰ä¸åŒçš„å®‰è£…å’Œé…ç½®æ–¹æ³•ï¼Œä»¥åŠä¸åŒçš„å®¢æˆ·ç«¯åº“å’ŒAPIï¼Œæ‚¨å¯ä»¥æ ¹æ®è‡ªèº«éœ€è¦é˜…è¯»ç›¸åº”çš„å®˜æ–¹æ–‡æ¡£å³å¯ã€‚

> æœ¬æ–‡ä¸»è¦å‚è€ƒï¼š
> 
> 1. [RabbitMQ Tutorials](https://www.rabbitmq.com/getstarted.html)
> 2. [RabbitMQä½¿ç”¨æ•™ç¨‹(è¶…è¯¦ç»†)](https://blog.csdn.net/lzx1991610/article/details/102970854)
> 3. [C# æ¶ˆæ¯é˜Ÿåˆ—ä¹‹ RabbitMQ åŸºç¡€å…¥é—¨](https://www.cnblogs.com/abeam/p/11872956.html)
> 4. [æ¶ˆæ¯é˜Ÿåˆ—å¸¸è§çš„å‡ ç§ä½¿ç”¨åœºæ™¯ä»‹ç»ï¼- çŸ¥ä¹](https://zhuanlan.zhihu.com/p/272700109#)
> 5. [åˆ†å¸ƒå¼ä¹‹æ¶ˆæ¯é˜Ÿåˆ—çš„ç‰¹ç‚¹ã€é€‰å‹ã€åŠåº”ç”¨åœºæ™¯è¯¦è§£](https://zhuanlan.zhihu.com/p/97179688)
> 6. [æ¶ˆæ¯é˜Ÿåˆ—æ¼«è°ˆï¼šä»€ä¹ˆæ˜¯æ¶ˆæ¯æ¨¡å‹ï¼Ÿ- çŸ¥ä¹](https://zhuanlan.zhihu.com/p/99791229)

# 1ã€åŸºç¡€æ¦‚å¿µ

[æ¶ˆæ¯é˜Ÿåˆ—](https://zhuanlan.zhihu.com/p/157112243)
: <font color="#dd0000">**æ¶ˆæ¯é˜Ÿåˆ—**</font>ï¼ˆ<font color="#dd0000">**M**</font>essage <font color="#dd0000">**Q**</font>ueueï¼‰æ˜¯ä¸€ç§é€šä¿¡æ¨¡å¼ï¼Œç”¨äºåœ¨åº”ç”¨ç¨‹åºä¹‹é—´ä¼ é€’æ¶ˆæ¯ã€‚å®ƒæä¾›äº†ä¸€ç§å¼‚æ­¥çš„ã€å¯é çš„é€šä¿¡æ–¹å¼ï¼Œå…è®¸å‘é€è€…ï¼ˆå‘é€æ¶ˆæ¯çš„åº”ç”¨ç¨‹åºï¼‰å’Œæ¥æ”¶è€…ï¼ˆæ¥æ”¶æ¶ˆæ¯çš„åº”ç”¨ç¨‹åºï¼‰èƒ½å¤Ÿç‹¬ç«‹åœ°è¿›è¡Œå·¥ä½œï¼Œè€Œä¸éœ€è¦å½¼æ­¤ç›´æ¥äº¤äº’ã€‚<br><br>åœ¨æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œæ¶ˆæ¯æ˜¯ä»¥é˜Ÿåˆ—çš„å½¢å¼å­˜å‚¨å’Œä¼ é€’çš„ã€‚å‘é€è€…å°†æ¶ˆæ¯æ”¾å…¥é˜Ÿåˆ—çš„æœ«å°¾ï¼Œè€Œæ¥æ”¶è€…ä»é˜Ÿåˆ—çš„å¼€å¤´è·å–æ¶ˆæ¯ã€‚è¿™ç§é˜Ÿåˆ—çš„ç‰¹æ€§ç¡®ä¿äº†æ¶ˆæ¯çš„æœ‰åºå¤„ç†ï¼Œå¹¶ä¸”å…è®¸å¤šä¸ªå‘é€è€…å’Œæ¥æ”¶è€…ä¹‹é—´è¿›è¡Œè§£è€¦ï¼Œä»è€Œæé«˜äº†ç³»ç»Ÿçš„å¯ä¼¸ç¼©æ€§å’Œå¯é æ€§ã€‚<br>![](./image/%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/1-MQschematicdiagram.jpg)<br>æ¶ˆæ¯é˜Ÿåˆ—çš„ä½¿ç”¨å¯ä»¥å¸¦æ¥è®¸å¤šå¥½å¤„ã€‚é¦–å…ˆï¼Œå®ƒå…è®¸å¼‚æ­¥å¤„ç†ï¼Œå³å‘é€è€…å¯ä»¥åœ¨å‘é€æ¶ˆæ¯åç»§ç»­æ‰§è¡Œå…¶ä»–ä»»åŠ¡ï¼Œè€Œä¸éœ€è¦ç­‰å¾…æ¥æ”¶è€…çš„å“åº”ã€‚è¿™ç§æ–¹å¼å¯ä»¥æé«˜åº”ç”¨ç¨‹åºçš„æ€§èƒ½å’Œååé‡ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†å¤§é‡æ¶ˆæ¯æˆ–å¤„ç†å»¶è¿Ÿè¾ƒé«˜çš„æ“ä½œæ—¶ã€‚<br><br>å…¶æ¬¡ï¼Œæ¶ˆæ¯é˜Ÿåˆ—å¯ä»¥è§£è€¦å‘é€è€…å’Œæ¥æ”¶è€…ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚å‘é€è€…åªéœ€å°†æ¶ˆæ¯å‘é€åˆ°é˜Ÿåˆ—ä¸­ï¼Œè€Œä¸éœ€è¦çŸ¥é“å…·ä½“çš„æ¥æ”¶è€…æ˜¯è°æˆ–æ¥æ”¶è€…ä½•æ—¶å¤„ç†æ¶ˆæ¯ã€‚è¿™ç§æ¾è€¦åˆçš„è®¾è®¡å…è®¸ç³»ç»Ÿä¸­çš„ä¸åŒæ¨¡å—ç‹¬ç«‹å¼€å‘ã€éƒ¨ç½²å’Œæ‰©å±•ï¼Œæé«˜äº†ç³»ç»Ÿçš„çµæ´»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚<br><br>æ­¤å¤–ï¼Œæ¶ˆæ¯é˜Ÿåˆ—è¿˜æä¾›äº†æ¶ˆæ¯æŒä¹…åŒ–çš„èƒ½åŠ›ï¼Œç¡®ä¿å³ä½¿åœ¨å‘é€è€…å’Œæ¥æ”¶è€…ä¹‹é—´å‘ç”Ÿæ•…éšœæˆ–ä¸­æ–­æ—¶ï¼Œæ¶ˆæ¯ä¸ä¼šä¸¢å¤±ã€‚æ¶ˆæ¯å¯ä»¥æŒä¹…åŒ–åˆ°ç£ç›˜ä¸Šï¼Œå¹¶åœ¨ç³»ç»Ÿæ¢å¤åé‡æ–°å‘é€ã€‚è¿™ç§å¯é æ€§ä¿è¯äº†æ¶ˆæ¯çš„ä¼ é€’ä¸ä¼šå› ä¸ºæ•…éšœè€Œä¸­æ–­ï¼Œä½¿ç³»ç»Ÿæ›´åŠ å¥å£®å’Œå¯é ã€‚

[**å¸¸è§çš„æ¶ˆæ¯é˜Ÿåˆ—è½¯ä»¶**](https://blog.csdn.net/u013521220/article/details/104352365)
: * [RabbitMQ](https://www.rabbitmq.com/)
  * [Apache Kafka](https://kafka.apache.org/)
  * [Apache ActiveMQ](https://activemq.apache.org/)
  * [Amazon SQS](https://aws.amazon.com/sqs/)
  * [Microsoft Azure Service Bus](https://azure.microsoft.com/en-us/services/service-bus/)

ä¸­é—´ä»¶
: <font color="#dd0000">**ä¸­é—´ä»¶**</font>æ˜¯æŒ‡ä½äºæ“ä½œç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºä¹‹é—´çš„è½¯ä»¶å±‚ã€‚å®ƒå……å½“äº†ä¸åŒè½¯ä»¶ç»„ä»¶ä¹‹é—´çš„æ¡¥æ¢ï¼Œæä¾›äº†é€šä¿¡å’Œåè°ƒçš„åŠŸèƒ½ï¼Œä»¥ä¾¿å®ƒä»¬èƒ½å¤Ÿç›¸äº’äº¤äº’å’Œåä½œã€‚<br><br>ä¸­é—´ä»¶çš„ä¸»è¦ç›®æ ‡æ˜¯ç®€åŒ–åˆ†å¸ƒå¼ç³»ç»Ÿçš„å¼€å‘å’Œç®¡ç†ã€‚å®ƒæä¾›äº†ä¸€ç»„é€šç”¨çš„åŠŸèƒ½å’ŒæœåŠ¡ï¼Œä½¿å¾—ä¸åŒçš„åº”ç”¨ç¨‹åºå’Œç³»ç»Ÿå¯ä»¥è¿›è¡Œäº’æ“ä½œï¼Œå¹¶èƒ½å¤Ÿä»¥å¯é ã€å®‰å…¨å’Œé«˜æ•ˆçš„æ–¹å¼è¿›è¡Œé€šä¿¡ã€‚<br><br>ä¸­é—´ä»¶å¯ä»¥å®ç°å„ç§åŠŸèƒ½ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š<br><br><ol><li>æ¶ˆæ¯ä¼ é€’ï¼šä¸­é—´ä»¶æä¾›æ¶ˆæ¯ä¼ é€’æœºåˆ¶ï¼Œç”¨äºåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ä¼ é€’å’Œäº¤æ¢æ•°æ®ã€‚æ¶ˆæ¯é˜Ÿåˆ—å°±æ˜¯ä¸€ç§å¸¸è§çš„æ¶ˆæ¯ä¼ é€’ä¸­é—´ä»¶ã€‚</li><li>è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼ˆRPCï¼‰ï¼šä¸­é—´ä»¶å¯ä»¥å®ç°è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼Œä½¿å¾—åº”ç”¨ç¨‹åºèƒ½å¤Ÿåœ¨ä¸åŒçš„è®¡ç®—æœºæˆ–è¿›ç¨‹ä¹‹é—´è°ƒç”¨å’Œæ‰§è¡Œå‡½æ•°æˆ–æ–¹æ³•ã€‚</li><li>æ•°æ®åº“è¿æ¥å’Œè®¿é—®ï¼šä¸­é—´ä»¶å¯ä»¥æä¾›æ•°æ®åº“è¿æ¥å’Œè®¿é—®çš„åŠŸèƒ½ï¼Œä½¿å¾—åº”ç”¨ç¨‹åºèƒ½å¤Ÿæ–¹ä¾¿åœ°æ“ä½œå’Œç®¡ç†æ•°æ®åº“ã€‚</li><li>åˆ†å¸ƒå¼äº‹åŠ¡å¤„ç†ï¼šä¸­é—´ä»¶å¯ä»¥æ”¯æŒåˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„äº‹åŠ¡å¤„ç†ï¼Œç¡®ä¿å¤šä¸ªæ“ä½œåœ¨ä¸åŒçš„è®¡ç®—æœºæˆ–è¿›ç¨‹ä¹‹é—´å…·æœ‰åŸå­æ€§ã€ä¸€è‡´æ€§ã€éš”ç¦»æ€§å’ŒæŒä¹…æ€§ã€‚</li><li>ç¼“å­˜ç®¡ç†ï¼šä¸­é—´ä»¶å¯ä»¥æä¾›ç¼“å­˜ç®¡ç†çš„åŠŸèƒ½ï¼ŒåŠ é€Ÿæ•°æ®è®¿é—®å’Œæé«˜ç³»ç»Ÿæ€§èƒ½ã€‚</li><li>å®‰å…¨è®¤è¯å’Œæˆæƒï¼šä¸­é—´ä»¶å¯ä»¥å®ç°å®‰å…¨è®¤è¯å’Œæˆæƒæœºåˆ¶ï¼Œä¿æŠ¤ç³»ç»Ÿå…å—æœªç»æˆæƒçš„è®¿é—®å’Œæ”»å‡»ã€‚</li></ol>

[Erlang](https://www.erlang.org/)
: <font color="#dd0000">**Erlang**</font> æ˜¯ä¸€ç§é€šç”¨çš„ç¼–ç¨‹è¯­è¨€ï¼Œæœ€åˆç”±çˆ±ç«‹ä¿¡ï¼ˆEricssonï¼‰çš„å¼€å‘å›¢é˜Ÿåœ¨1980å¹´ä»£æœ«åˆ›å»ºã€‚å®ƒæ˜¯ä¸€ç§å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€ï¼Œä¸“é—¨è®¾è®¡ç”¨äºæ„å»ºå¯æ‰©å±•ã€å¹¶å‘å’Œåˆ†å¸ƒå¼çš„è½¯å®æ—¶ç³»ç»Ÿã€‚<font color="#008000">RabbitMQ æœåŠ¡æ˜¯ä½¿ç”¨ Erlang è¯­è¨€ç¼–å†™çš„</font>ã€‚

# 2ã€æœ¬æ–‡ä½¿ç”¨çš„ç›¸å…³è½¯ä»¶æˆ–äº§å“

1. Windows 10 ä¸“ä¸šç‰ˆ 22H2
2. Visual Studio Community 2022 - 17.6.2
3. Microsoft .NET Framework ç‰ˆæœ¬ 4.8.04084
4. ã€Œ.NET æ¡Œé¢å¼€å‘ã€å·¥ä½œè´Ÿè·
5. Erlang 25.3
6. RabbitMQ Server 3.12.0

# 3ã€ğŸ”” é¡»çŸ¥

<font color="#C71585">å¤§å¤šæ•°æ¶ˆæ¯é˜Ÿåˆ—ä¸­é—´ä»¶éƒ½éœ€è¦åœ¨è®¡ç®—æœºä¸Šå®‰è£…æœåŠ¡å™¨è½¯ä»¶ã€‚å®‰è£…æœåŠ¡å™¨è½¯ä»¶åï¼Œæ‚¨éœ€è¦å¯åŠ¨æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡å™¨å¹¶æ ¹æ®éœ€è¦è¿›è¡Œé…ç½®ã€‚ç„¶åï¼Œæ‚¨å°±å¯ä»¥åœ¨æ‚¨çš„åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ç›¸åº”çš„å®¢æˆ·ç«¯åº“æ¥è¿æ¥åˆ°æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡å™¨å¹¶ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—äº†ã€‚</font>

# 4ã€å®‰è£…å‰å‡†å¤‡å·¥ä½œ â€”â€” é˜…è¯»å®‰è£…å‘å¯¼é¡µé¢

> ğŸ’¬ å¦‚æœæ‚¨ä¸æƒ³é˜…è¯»å®‰è£…å‘å¯¼ï¼Œé‚£ä¹ˆç›´æ¥è·³è¿‡ç¬¬å››ç« å°±å¥½å•¦~ [ç‚¹å‡»](#AnchorPoint-InstallRabbitMQServer)å‰å¾€ç¬¬äº”ç« 

1. é¦–å…ˆå‰å¾€ RabbitMQ çš„[å…¥é—¨æŒ‡å—é¡µé¢](https://www.rabbitmq.com/#getstarted)ï¼Œç‚¹å‡»â€œ**Download + Installation**â€ï¼š<br>![](./image/%E5%AE%89%E8%A3%85%20RabbitMQ%20%E6%9C%8D%E5%8A%A1%E5%99%A8/1-getstarted.PNG)
2. è¿›å…¥åˆ°[ä¸‹è½½å’Œå®‰è£… RabbitMQ é¡µé¢](https://www.rabbitmq.com/download.html)ï¼Œå¯ä»¥çœ‹åˆ°æœ€æ–°çš„ RabbitMQ [å‘è¡Œç‰ˆæœ¬](https://github.com/rabbitmq/rabbitmq-server/releases)ä¸º **3.12.0**ã€‚ç”±äºç¬”è€…ä½¿ç”¨çš„ Windows æ“ä½œç³»ç»Ÿï¼Œæ•…ç‚¹å‡»â€œ**Windows Installer**â€è¿›å…¥ Windows å¹³å°çš„å®‰è£…ç¨‹åºçš„å®‰è£…å‘å¯¼é¡µé¢ï¼š<br>![](./image/%E5%AE%89%E8%A3%85%20RabbitMQ%20%E6%9C%8D%E5%8A%A1%E5%99%A8/2-downloadandinstall.PNG)

    > æ‚¨ä¹Ÿå¯ä»¥é€šè¿‡ [Chocolatey åŒ…å®‰è£…](https://community.chocolatey.org/packages/rabbitmq)ï¼ˆæœ¬æ–‡ä¸æ¼”ç¤ºï¼‰æˆ–è€…é€šè¿‡[æ„å»ºäºŒè¿›åˆ¶åŒ…æ‰‹åŠ¨å®‰è£…](https://www.rabbitmq.com/install-windows-manual.html)ï¼ˆé€šå¸¸ä¸æ¨èï¼‰ã€‚

3. è¿›å…¥åˆ° [Windows å¹³å°å®‰è£…ç¨‹åºçš„å‘å¯¼é¡µé¢](https://www.rabbitmq.com/install-windows.html)ï¼Œæ¨èäº†ä¸¤ä¸ªå®‰è£…é€‰é¡¹ï¼šâ‘ ä½¿ç”¨ Chocolatey å®‰è£…ï¼›â‘¡ä»¥ç®¡ç†å‘˜èº«ä»½ä½¿ç”¨å®˜æ–¹å®‰è£…ç¨‹åºå®‰è£…ã€‚è¿™é‡Œé€‰æ‹©ç¬¬äºŒé¡¹ â€”â€” â€œ[Using the official installer](#AnchorPoint-UsingtheInstaller) as an administrative userâ€ï¼š<br>![](./image/%E5%AE%89%E8%A3%85%20RabbitMQ%20%E6%9C%8D%E5%8A%A1%E5%99%A8/3-installonwindows.png)

<a id="AnchorPoint-UsingtheInstaller">

## 4.1ã€[ä½¿ç”¨å®‰è£…ç¨‹åº](https://www.rabbitmq.com/install-windows.html#installer)

å®˜æ–¹çš„ RabbitMQ å®‰è£…ç¨‹åºæ˜¯ä¸º[æ¯ä¸ª RabbitMQ ç‰ˆæœ¬](https://www.rabbitmq.com/changelog.html)ç”Ÿæˆçš„ã€‚

ä¸[é€šè¿‡ Chocolatey å®‰è£…](https://www.rabbitmq.com/install-windows.html#chocolatey)ç›¸æ¯”ï¼Œæ­¤é€‰é¡¹ä¸º Windows ç”¨æˆ·æä¾›äº†æœ€å¤§çš„çµæ´»æ€§ï¼Œä½†ä¹Ÿè¦æ±‚ä»–ä»¬äº†è§£å®‰è£…ç¨‹åºä¸­çš„æŸäº›å‡è®¾å’Œè¦æ±‚ï¼š

- ä¸€æ¬¡åªèƒ½å®‰è£…ä¸€ä¸ª Erlang ç‰ˆæœ¬ï¼›
- å¿…é¡»**ä»¥ç®¡ç†å‘˜èº«ä»½**å®‰è£… Erlangï¼›
- **å¼ºçƒˆå»ºè®®** RabbitMQ ä¹Ÿæ˜¯é€šè¿‡ç®¡ç†å‘˜èº«ä»½å®‰è£…ï¼›
- å®‰è£…è·¯å¾„åªèƒ½åŒ…å« ASCII å­—ç¬¦ï¼Œ**å¼ºçƒˆå»ºè®®**å®‰è£…è·¯å¾„çš„ä»»ä½•ç›®å½•åç§°ä¸­éƒ½ä¸è¦åŒ…å«ç©ºæ ¼ï¼›
- å¯èƒ½éœ€è¦æ‰‹åŠ¨å¤åˆ¶ CLI å·¥å…·ä½¿ç”¨çš„[å…±äº«å¯†é’¥](https://www.rabbitmq.com/cli.html#erlang-cookie)æ–‡ä»¶ï¼›
- CLI å·¥å…·è¦æ±‚åœ¨ UTF-8 æ¨¡å¼ä¸‹è¿è¡Œ Windows æ§åˆ¶å°ã€‚

å¦‚æœä¸æ»¡è¶³è¿™äº›æ¡ä»¶ï¼ŒWindows æœåŠ¡å’Œ CLI å·¥å…·å¯èƒ½éœ€è¦é‡æ–°å®‰è£…æˆ–å…¶ä»–æ‰‹åŠ¨æ­¥éª¤ï¼Œä»¥ä½¿å®ƒä»¬æŒ‰é¢„æœŸè¿è¡Œã€‚

[Windows ç‰¹å®šé—®é¢˜](https://www.rabbitmq.com/windows-quirks.html)æŒ‡å—ä¸­å¯¹æ­¤è¿›è¡Œäº†æ›´è¯¦ç»†çš„ä»‹ç»ã€‚

### 4.1.1ã€ä¾èµ–

RabbitMQ éœ€è¦å®‰è£… 64 ä½å…¶[æ”¯æŒçš„ Erlang for Windows](https://www.rabbitmq.com/which-erlang.html) ç‰ˆæœ¬ã€‚

[Erlang 25.3](https://www.erlang.org/patches/otp-25.3.2) æ˜¯æœ€æ–°çš„æ”¯æŒç‰ˆæœ¬ã€‚æ‚¨å¯ä»¥åœ¨ [Erlang/OTP ç‰ˆæœ¬æ ‘](https://erlang.org/download/otp_versions_tree.html)é¡µé¢è·å–å…¶ä»–ç‰ˆæœ¬ï¼ˆæ¯”å¦‚ï¼šæ—©æœŸç‰ˆæœ¬ï¼‰çš„ Erlang for Windows äºŒè¿›åˆ¶æ„å»ºåŒ…ã€‚

Erlang **å¿…é¡»ä»¥ç®¡ç†å‘˜èº«ä»½å®‰è£…**ï¼Œå¦åˆ™ RabbitMQ Windows æœåŠ¡å°†æ— æ³•å‘ç°å®ƒã€‚å®‰è£…å®Œæˆæ”¯æŒçš„ Erlang ç‰ˆæœ¬åï¼Œä¸‹è½½ RabbitMQ å®‰è£…ç¨‹åº `rabbitmq-server-{version}.exe` å¹¶è¿è¡Œå®ƒã€‚å®‰è£…ç¨‹åºä¼šå°† RabbitMQ ä½œä¸º Windows æœåŠ¡è¿›è¡Œå®‰è£…å¹¶ä½¿ç”¨é»˜è®¤é…ç½®å¯åŠ¨å®ƒã€‚

<a id="AnchorPoint-DirectDownload">

### 4.1.2ã€[ç›´æ¥ä¸‹è½½](https://www.rabbitmq.com/install-windows.html#downloads)

|æè¿°|ä¸‹è½½|ç­¾å|
|---|---|---|
|Windows ç³»ç»Ÿçš„å®‰è£…ç¨‹åºï¼ˆæ¥è‡ª [Github](https://github.com/rabbitmq/rabbitmq-server/releases)ï¼‰|[rabbitmq-server-3.12.0.exe](https://github.com/rabbitmq/rabbitmq-server/releases/download/v3.12.0/rabbitmq-server-3.12.0.exe)|[ç­¾å](https://github.com/rabbitmq/rabbitmq-server/releases/download/v3.12.0/rabbitmq-server-3.12.0.exe.asc)|

## 4.2ã€[è¿è¡Œ RabbitMQ Windows æœåŠ¡](https://www.rabbitmq.com/install-windows.html#service)

ä¸€æ—¦ Erlang å’Œ RabbitMQ éƒ½è¢«å®‰è£…äº†ï¼ŒRabbitMQ èŠ‚ç‚¹å°±èƒ½ä½œä¸º Windows æœåŠ¡å¯åŠ¨ã€‚RabbitMQ æœåŠ¡ä¼šè‡ªåŠ¨å¯åŠ¨ã€‚RabbitMQ Windows æœåŠ¡å¯ä»¥ä»â€œå¼€å§‹â€èœå•è¿›è¡Œç®¡ç†ã€‚

## 4.3ã€[CLI å·¥å…·](https://www.rabbitmq.com/install-windows.html#cli)

RabbitMQ èŠ‚ç‚¹é€šå¸¸ä½¿ç”¨ [PowerShell](https://learn.microsoft.com/zh-cn/windows-server/administration/windows-commands/powershell) ä¸­çš„ [CLI å·¥å…·](https://www.rabbitmq.com/cli.html)è¿›è¡Œç®¡ç†ã€æ£€æŸ¥å’Œæ“ä½œã€‚

åœ¨ Windows ä¸Šï¼Œä¸å…¶ä»–å¹³å°ç›¸æ¯”ï¼ŒCLI å·¥å…·å…·æœ‰ `.bat` åç¼€ã€‚ä¾‹å¦‚ï¼šWindows ä¸Šçš„ `rabbitmqctl` è¢«è°ƒç”¨ä¸º `rabbitmqctl.bat`ã€‚

ä¸ºäº†ä½¿è¿™äº›å·¥å…·æ­£å¸¸å·¥ä½œï¼Œå®ƒä»¬å¿…é¡»èƒ½å¤Ÿä½¿ç”¨åä¸º **Erlang cookie** çš„å…±äº«å¯†é’¥æ–‡ä»¶[å‘ RabbitMQ èŠ‚ç‚¹è¿›è¡Œèº«ä»½éªŒè¯](https://www.rabbitmq.com/cli.html#erlang-cookie)ã€‚

[CLI å·¥å…·å‘å¯¼](https://www.rabbitmq.com/cli.html)ä¸»é¡µé¢æ¶µç›–äº†ä¸å‘½ä»¤è¡Œå·¥å…·ä½¿ç”¨ç›¸å…³çš„ç»å¤§éƒ¨åˆ†è¯é¢˜ã€‚

è¦äº†è§£å„ç§ RabbitMQ CLI å·¥å…·æä¾›çš„å‘½ä»¤ï¼Œè¯·ä½¿ç”¨ `help` å‘½ä»¤ï¼š

```shell
# ç½—åˆ— rabbitmqctl.bat æä¾›çš„å‘½ä»¤
rabbitmqctl.bat help

# ç½—åˆ— rabbitmq-diagnostics.bat æä¾›çš„å‘½ä»¤
rabbitmq-diagnostics.bat help

# ç½—åˆ— rabbitmq-plugins.bat æä¾›çš„å‘½ä»¤
rabbitmq-plugins.bat help
```

æƒ³è¦å­¦ä¹ ç‰¹å®šå‘½ä»¤ï¼Œå°†å‘½ä»¤åç§°ä½œä¸º `help` çš„å‚æ•°ä¼ é€’å³å¯ï¼š

```shell
rabbitmqctl.bat help add_user
```

## 4.4ã€[Cookie æ–‡ä»¶ä½ç½®](https://www.rabbitmq.com/install-windows.html#cli-cookie-file-location)

åœ¨ Windows å¹³å°ä¸‹ï¼Œ[cookie æ–‡ä»¶ä½ç½®](https://www.rabbitmq.com/cli.html#cookie-file-locations)å–å†³äºæ˜¯å¦è®¾ç½®äº† `HOMEDRIVE` å’Œ `HOMEPATH` ç¯å¢ƒå˜é‡ã€‚

å¦‚æœ RabbitMQ ä½¿ç”¨éç®¡ç†å‘˜è´¦æˆ·å®‰è£…ï¼Œåˆ™èŠ‚ç‚¹å’Œ CLI å·¥å…·ä½¿ç”¨çš„[å…±äº«å¯†é’¥](https://www.rabbitmq.com/cli.html#erlang-cookie)æ–‡ä»¶å°†ä¸ä¼šè¢«æ”¾åˆ°æ­£ç¡®çš„ä½ç½®ï¼Œè¿™ä¼šå¯¼è‡´ä½¿ç”¨ `rabbitmqctl.bat` ä»¥åŠå…¶ä»– CLI å·¥å…·æ—¶å‡ºç°[èº«ä»½éªŒè¯å¤±è´¥é”™è¯¯](https://www.rabbitmq.com/cli.html#cli-authentication-failures)ã€‚

å¯ä»¥ä½¿ç”¨ä¸‹åˆ—é€‰é¡¹ä¹‹ä¸€åŒ–è§£ï¼š

* ä½¿ç”¨ç®¡ç†å‘˜è´¦æˆ·é‡æ–°å®‰è£… RabbitMQ
* ä» `%SystemRoot%` æˆ– `%SystemRoot%\system32\config\systemprofile` æ‰‹åŠ¨å¤åˆ¶ `.erlang.cookie` æ–‡ä»¶åˆ° `%HOMEDRIVE%%HOMEPATH%`

---

...ï¼ˆæ›´å¤šå†…å®¹è¯·è‡ªè¡Œå‰å¾€ [Windows å¹³å°çš„å®‰è£…ç¨‹åºå‘å¯¼é¡µé¢](https://www.rabbitmq.com/install-windows.html)äº†è§£ï¼‰

<a id="AnchorPoint-InstallRabbitMQServer">

# 5ã€æ­£å¼å¼€å§‹å®‰è£… RabbitMQ æœåŠ¡å™¨

## 5.1ã€ä¸‹è½½å®‰è£… Erlang

1. åœ¨å®‰è£… RabbitMQ ä¹‹å‰ï¼Œé¦–å…ˆå®‰è£… RabbitMQ ä¾èµ– â€”â€” Erlangã€‚å‰å¾€ [Erlang 25.3](https://www.erlang.org/patches/otp-25.3.2)ï¼Œç‚¹å‡»â€œ<font color="#a2003e">**Download Windows installer**</font>â€ï¼š<br>![](./image/%E5%AE%89%E8%A3%85%20RabbitMQ%20%E6%9C%8D%E5%8A%A1%E5%99%A8/4-downloaderlang.png)
2. ä¸‹è½½å®Œæˆåï¼Œ<font color="#ff4500">**ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ**</font>ï¼š<br>![](./image/%E5%AE%89%E8%A3%85%20RabbitMQ%20%E6%9C%8D%E5%8A%A1%E5%99%A8/5-downloaderlangcompleted.PNG)
3. è¿è¡Œåè¿›å…¥ç»„ä»¶é€‰æ‹©é¡µé¢ï¼Œä¸€èˆ¬æŒ‰é»˜è®¤é€‰æ‹©å³å¯ï¼Œç‚¹å‡»ä¸‹ä¸€æ­¥ï¼š<br>![](./image/%E5%AE%89%E8%A3%85%20RabbitMQ%20%E6%9C%8D%E5%8A%A1%E5%99%A8/6-setup.PNG)
4. é€‰æ‹©å®‰è£…ä½ç½®é¡µé¢ï¼Œå¯ä»¥æŒ‰é»˜è®¤ä¹Ÿå¯ä»¥æ ¹æ®è‡ªèº«å–œå¥½ä¿®æ”¹ï¼›ç¡®è®¤åç‚¹å‡»ä¸‹ä¸€æ­¥ï¼š<br>![](./image/%E5%AE%89%E8%A3%85%20RabbitMQ%20%E6%9C%8D%E5%8A%A1%E5%99%A8/7-installlocation.PNG)
5. é€‰æ‹©å¼€å§‹èœå•æ–‡ä»¶å¤¹é¡µé¢ï¼Œè¯¥é¡µé¢è¦æ±‚æ‚¨é€šè¿‡ç‚¹å‡»é€‰ä¸­æˆ–è€…æ‰‹åŠ¨è¾“å…¥çš„æ–¹å¼ä»¥é€‰æ‹©ä¸€ä¸ªå¼€å§‹èœå•æ–‡ä»¶å¤¹ç”¨äºåˆ›å»ºç¨‹åºçš„å¿«æ·æ–¹å¼ï¼ŒæŒ‰é»˜è®¤å³å¯ã€‚ç‚¹å‡»â€œå®‰è£…â€ï¼š<br>![](./image/%E5%AE%89%E8%A3%85%20RabbitMQ%20%E6%9C%8D%E5%8A%A1%E5%99%A8/8-choosestartmenufolder.PNG)

    > å¦‚æœæŒ‰ç…§é»˜è®¤ï¼Œå®‰è£…å®Œæˆåå¯ä»¥åœ¨[å¼€å§‹èœå•](https://support.microsoft.com/zh-cn/windows/%E6%89%93%E5%BC%80-%E5%BC%80%E5%A7%8B-%E8%8F%9C%E5%8D%95-4ed57ad7-ed1f-3cc9-c9e4-f329822f5aeb)æ‰¾åˆ°ä¸€ä¸ªåä¸ºâ€œ**Erlang OTP 25 (x64)**â€çš„æ–‡ä»¶å¤¹ï¼Œè¯¥æ–‡ä»¶å¤¹å­˜æ”¾äº† Erlang çš„å¿«æ·æ–¹å¼ï¼š<br>![](./image/%E5%AE%89%E8%A3%85%20RabbitMQ%20%E6%9C%8D%E5%8A%A1%E5%99%A8/10-startmenu.png)

6. å®‰è£…å®Œæˆï¼Œç‚¹å‡»â€œå…³é—­â€ï¼š<br>![](./image/%E5%AE%89%E8%A3%85%20RabbitMQ%20%E6%9C%8D%E5%8A%A1%E5%99%A8/9-installcompleted.PNG)
7. å®Œæˆåï¼Œå°±å¯ä»¥åˆ é™¤ Erlang çš„å®‰è£…ç¨‹åºäº†ï¼š<br>![](./image/%E5%AE%89%E8%A3%85%20RabbitMQ%20%E6%9C%8D%E5%8A%A1%E5%99%A8/11-%E5%88%A0%E9%99%A4%E5%AE%89%E8%A3%85%E7%A8%8B%E5%BA%8F.PNG)

## 5.2ã€ä¸‹è½½å®‰è£… RabbitMQ Server

1. å®‰è£…å®Œ Erlang åï¼Œå°±å¯ä»¥ä¸‹è½½å®‰è£… RabbitMQ Server äº†ï¼Œç¬”è€…å®‰è£…çš„ Erlang ç‰ˆæœ¬ä¸º **25.3.2**ï¼Œç”±[è¯¥é¡µé¢](https://www.rabbitmq.com/which-erlang.html)å¯çŸ¥å¯ä»¥å®‰è£… RabbitMQ çš„æœ€æ–°ç‰ˆæœ¬ â€”â€” **3.12.0**ï¼š<br>![](./image/%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85RabbitMQServer/1-versionsupport.png)
2. å‰å¾€[ç›´æ¥ä¸‹è½½](#AnchorPoint-DirectDownload)ï¼Œä¸‹è½½ `rabbitmq-server-3.12.0.exe`ï¼š![](./image/%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85RabbitMQServer/2-download.png)
3. ä¸‹è½½å®Œæˆåï¼Œ<font color="#ff4500">**ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ**</font>ï¼š<br>![](./image/%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85RabbitMQServer/3-downloadcompleted.PNG)
4. è¿è¡Œåè¿›å…¥ç»„ä»¶é€‰æ‹©é¡µé¢ï¼Œä¸€èˆ¬æŒ‰é»˜è®¤é€‰æ‹©å³å¯ï¼Œç‚¹å‡»ä¸‹ä¸€æ­¥ï¼š<br>![](./image/%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85RabbitMQServer/4-componentchoose.PNG)
5. é€‰æ‹©å®‰è£…ä½ç½®é¡µé¢ï¼Œå¯ä»¥æŒ‰é»˜è®¤ä¹Ÿå¯ä»¥æ ¹æ®è‡ªèº«å–œå¥½ä¿®æ”¹ï¼›ç¡®è®¤åç‚¹å‡»â€œå®‰è£…â€ï¼š<br>![](./image/%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85RabbitMQServer/5-chooseinstalllocation.PNG)

    > ğŸ’¬ åœ¨[è¿™ä¸ª](https://www.rabbitmq.com/install-windows.html#installer)å®˜æ–¹é¡µé¢æåˆ°è¿‡â€œå¼ºçƒˆå»ºè®®å®‰è£…è·¯å¾„çš„ä»»ä½•ç›®å½•åç§°ä¸­éƒ½ä¸è¦åŒ…å«ç©ºæ ¼â€ï¼Œä½†æ˜¯å®‰è£…ç¨‹åºé»˜è®¤çš„å®‰è£…è·¯å¾„éƒ½æ˜¯æœ‰ç©ºæ ¼çš„ï¼Œæ‰€ä»¥æˆ‘ä¹Ÿä¸å¤ªæ‡‚ä»–ä»¬äº†ï¼Œï¼Œï¼Œ

6. å®‰è£…å®Œæˆåï¼Œç‚¹å‡»ä¸‹ä¸€æ­¥ï¼š<br>![](./image/%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85RabbitMQServer/6-installcompleted.PNG)

    <a id="AnchorPoint-CompletedPage">

7. å®Œæˆé¡µé¢ï¼Œç‚¹å‡»â€œç»“æŸâ€ï¼š<br>![](./image/%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85RabbitMQServer/7-completed.PNG)

    > ç»“æŸåå¯ä»¥åœ¨[å¼€å§‹èœå•](https://support.microsoft.com/zh-cn/windows/%E6%89%93%E5%BC%80-%E5%BC%80%E5%A7%8B-%E8%8F%9C%E5%8D%95-4ed57ad7-ed1f-3cc9-c9e4-f329822f5aeb)ä¸­æ‰¾åˆ°ä¸€ä¸ªåä¸ºâ€œ**RabbitMQ Server**â€çš„æ–‡ä»¶å¤¹ï¼Œå¯ä»¥ä»è¿™é‡Œç®¡ç† RabbitMQ æœåŠ¡å™¨ä»¥åŠä½¿ç”¨ CLI å·¥å…·ï¼š<br>![](./image/%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85RabbitMQServer/8-startmenu.png)

8. å®Œæˆåï¼Œå°±å¯ä»¥åˆ é™¤ RabbitMQ Server çš„å®‰è£…ç¨‹åºäº†ï¼š<br>![](./image/%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85RabbitMQServer/9-delete.PNG)
9.  ç”±äºåœ¨[å®Œæˆé¡µé¢](#AnchorPoint-CompletedPage)é»˜è®¤å‹¾é€‰äº†â€œStart RabbitMQ serviceâ€ï¼Œæ‰€ä»¥æ­¤æ—¶æˆ‘ä»¬å·²ç»å¯ä»¥åœ¨[è®¡ç®—æœºç®¡ç†é¡µ](https://jingyan.baidu.com/article/e2284b2bab6e35e2e7118d7d.html)æ‰¾åˆ°è¯¥ Windows æœåŠ¡äº†ï¼š<br>![](./image/%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85RabbitMQServer/10-WindowsService.PNG)

## 5.3ã€å¯ç”¨æœåŠ¡ç®¡ç†

æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€äº›æ–¹æ³•æ¥ç®¡ç† RabbitMQ æœåŠ¡å™¨ï¼Œåœ¨å®˜ç½‘çš„[ç«¯å£è®¿é—®](https://www.rabbitmq.com/install-windows.html#ports)é¡µé¢ä»‹ç»äº† RabbitMQ èŠ‚ç‚¹ç»‘å®šåˆ°çš„ç«¯å£ï¼š<br>![](./image/%E5%90%AF%E5%8A%A8%E7%AE%A1%E7%90%86%E7%AB%AF%E5%8F%A3/0-portaccess.PNG)<br>å…¶ä¸­æˆ‘ä»¬ä¸»è¦å…³æ³¨ **15672** å·ç«¯å£ï¼š[HTTP API](https://www.rabbitmq.com/management.html) å®¢æˆ·ç«¯ï¼Œ[ç®¡ç† UI](https://www.rabbitmq.com/management.html) å’Œ [rabbitmqadmin](https://www.rabbitmq.com/management-cli.html)ï¼ˆä»…å½“å¯ç”¨äº†[ç®¡ç†æ’ä»¶](https://www.rabbitmq.com/management.html)æ—¶ï¼‰ã€‚

ğŸ’¬ <font color="#C71585">æˆ‘ä»¬å¯ä»¥é€šè¿‡ HTTP API ä½¿ç”¨è¯¥ç®¡ç†æ’ä»¶ç”¨æ¥ç®¡ç†å’Œ[ç›‘æ§](https://www.rabbitmq.com/monitoring.html) RabbitMQ èŠ‚ç‚¹å’Œé›†ç¾¤</font>ï¼Œä»¥åŠä½¿ç”¨åŸºäºæµè§ˆå™¨çš„ UI å’Œå‘½ä»¤è¡Œå·¥å…·ï¼Œ[rabbitmqadmin](https://www.rabbitmq.com/management-cli.html)ã€‚

1. åœ¨[å¼€å§‹èœå•](https://support.microsoft.com/zh-cn/windows/%E6%89%93%E5%BC%80-%E5%BC%80%E5%A7%8B-%E8%8F%9C%E5%8D%95-4ed57ad7-ed1f-3cc9-c9e4-f329822f5aeb)ä¸­æ‰“å¼€ **RabbitMQ å‘½ä»¤æç¤ºç¬¦ (sbin dir)**ï¼š<br>![](./image/%E5%90%AF%E5%8A%A8%E7%AE%A1%E7%90%86%E7%AB%AF%E5%8F%A3/1-%E6%89%93%E5%BC%80%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7.png)
2. ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ä»¥å¯ç”¨ RabbitMQ ç®¡ç†æ’ä»¶ï¼š

    ```shell
    rabbitmq-plugins enable rabbitmq_management
    ```
    ![](./image/%E5%90%AF%E5%8A%A8%E7%AE%A1%E7%90%86%E7%AB%AF%E5%8F%A3/2-%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%90%AF%E5%8A%A8.PNG)

3. è¿™é‡Œæç¤ºæ”¹åŠ¨ä¼šåœ¨é‡å¯ä»£ç†åç”Ÿæ•ˆï¼Œå‰å¾€[è®¡ç®—æœºç®¡ç†é¡µ](https://jingyan.baidu.com/article/e2284b2bab6e35e2e7118d7d.html)æ‰¾åˆ° RabbitMQ Windows æœåŠ¡ï¼Œé€šè¿‡é‡å¯è¯¥æœåŠ¡ä»¥é‡å¯ä»£ç†ï¼š<br>![](./image/%E5%90%AF%E5%8A%A8%E7%AE%A1%E7%90%86%E7%AB%AF%E5%8F%A3/3-%E9%87%8D%E5%90%AF%E6%9C%8D%E5%8A%A1.PNG)
4. æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥å¦‚ä¸‹åœ°å€ä»¥è®¿é—®ï¼š`http://127.0.0.1:15672/`<br>![](./image/%E5%90%AF%E5%8A%A8%E7%AE%A1%E7%90%86%E7%AB%AF%E5%8F%A3/4-%E7%99%BB%E5%BD%95.PNG)

    > [é»˜è®¤ç”¨æˆ·è®¿é—®æƒé™](https://www.rabbitmq.com/install-windows.html#default-user-access)ï¼šä»£ç†ä¼šä½¿ç”¨å¯†ç  `guest` åˆ›å»ºä¸€ä¸ªç”¨æˆ· `guest`ã€‚æœªé…ç½®çš„å®¢æˆ·ç«¯é€šå¸¸ä¼šä½¿ç”¨è¿™äº›å‡­æ®ã€‚**é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™äº›å‡­æ®åªèƒ½æ˜¯åœ¨ä½œä¸ºæœ¬åœ°ä¸»æœºè¿æ¥åˆ°ä»£ç†æ—¶ä½¿ç”¨**ï¼Œæ‰€ä»¥ä½ éœ€è¦åœ¨ä»»ä½•å…¶ä»–è®¾å¤‡è¿æ¥åˆ°ä»£ç†ä¹‹å‰é‡‡å–ä¸€äº›è¡ŒåŠ¨ã€‚
    >
    > æœ‰å…³å¦‚ä½•åˆ›å»ºæ›´å¤šç”¨æˆ·ä»¥åŠåˆ é™¤ `guest` ç”¨æˆ·çš„ä¿¡æ¯ï¼Œè¯·å‚é˜…æœ‰å…³[è®¿é—®æ§åˆ¶](https://www.rabbitmq.com/access-control.html)çš„æ–‡æ¡£ã€‚
    >
    > ç»¼ä¸Šï¼Œè¿™ä¸€æ­¥æˆ‘ä»¬ä½¿ç”¨é»˜è®¤è´¦å· `guest` å’Œå¯†ç  `guest` ç™»å½•å³å¯ã€‚

5. ç™»å½•æˆåŠŸåå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br>![](./image/%E5%90%AF%E5%8A%A8%E7%AE%A1%E7%90%86%E7%AB%AF%E5%8F%A3/5-%E8%BF%9B%E5%85%A5.PNG)

# 6ã€åœ¨ä¸¤ä¸ªåº”ç”¨ç¨‹åºä¹‹é—´ä½¿ç”¨ RabbitMQ æ¶ˆæ¯é˜Ÿåˆ—ä¸­é—´ä»¶

> âš ï¸ åœ¨å¼€å§‹æœ¬ç« çš„å†…å®¹ä¹‹å‰ï¼Œæ‚¨éœ€è¦ç¡®ä¿æ‚¨å·²ç»å®Œæˆäº† RabbitMQ æœåŠ¡å™¨çš„å®‰è£…å¹¶æ­£å¸¸å¯åŠ¨ï¼æ‚¨å¯ä»¥å‚è€ƒ[ç¬¬äº”ç« ](#AnchorPoint-InstallRabbitMQServer)äº†è§£ç›¸å…³å†…å®¹ã€‚

1. æ‰“å¼€ Visual Studioï¼Œåˆ›å»ºä¸¤ä¸ªæ§åˆ¶å°åº”ç”¨ç¨‹åºé¡¹ç›® `RabbitMQProducer` å’Œ `RabbitMQConsumer`ï¼š<br>![](./image/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B5%8B%E8%AF%95/1-newproject.PNG)

    > `RabbitMQProducer`ï¼šç”Ÿäº§è€…ï¼Œç”¨äºå‘æ¶ˆæ¯é˜Ÿåˆ—ä¸­<font color="#008000">**å‘é€æ¶ˆæ¯**</font>ï¼›<br>
    > `RabbitMQConsumer`ï¼šæ¶ˆè´¹è€…ï¼Œ<font color="#008000">**æ¥æ”¶**</font>æ¥è‡ªæ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„<font color="#008000">**æ¶ˆæ¯**</font>ï¼›

2. å®Œæˆåï¼Œå³å‡»é¡¹ç›®åç§°ï¼Œç‚¹å‡»â€œç®¡ç† NuGet ç¨‹åºåŒ…â€ï¼š<br>![](./image/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B5%8B%E8%AF%95/2-Nuget.PNG)
3. åˆ†åˆ«ä¸º `RabbitMQProducer` å’Œ `RabbitMQConsumer` ä¸¤ä¸ªé¡¹ç›®å¼•å…¥ RabbitMQ.Client åº“ï¼š<br>![](./image/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B5%8B%E8%AF%95/3-%E5%AE%89%E8%A3%85Client%E5%BA%93.png)

---

ä»¥ä¸‹æ˜¯ `RabbitMQProducer` çš„ä»£ç ï¼š
```C#
using RabbitMQ.Client;
using System.Text;

//è¿æ¥ RabbitMQ å·¥å‚å®ä¾‹
var factory = new ConnectionFactory() { HostName = "localhost",         //ä¸»æœºåï¼Œé»˜è®¤ä¸º "localhost"
                                        Port = 5672,                    //è¦è¿æ¥çš„ç«¯å£ï¼Œé»˜è®¤ä¸º -1(5672)
                                        UserName = "guest",             //ç”¨æˆ·åï¼Œé»˜è®¤ä¸º "guest"
                                        Password = "guest"};            //å¯†ç ï¼Œé»˜è®¤ä¸º "guest"
//åˆ›å»ºè¿æ¥å¯¹è±¡
using (var connection = factory.CreateConnection())
//åˆ›å»ºä¸€ä¸ªæ–°çš„é€šé“ã€ä¼šè¯å’Œæ¨¡å‹
using(var channel = connection.CreateModel())
{
    //å£°æ˜ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—
    channel.QueueDeclare(queue: "myTestQueue",      //æ¶ˆæ¯é˜Ÿåˆ—åç§°
                         durable: false,            //é˜Ÿåˆ—æ˜¯å¦èƒ½åœ¨ä»£ç†é‡å¯åä»ç„¶å­˜åœ¨
                         exclusive: false,          //æ˜¯å¦åº”è¯¥å°†æ­¤é˜Ÿåˆ—é™åˆ¶åœ¨å…¶å£°æ˜çš„è¿æ¥ä¸­?è¿™æ ·çš„é˜Ÿåˆ—å°†åœ¨å…¶å£°æ˜è¿æ¥å…³é—­æ—¶è¢«åˆ é™¤ã€‚ï¼ˆåœ¨ä¸€ä¸ªå®¢æˆ·ç«¯åŒæ—¶å‘é€å’Œè¯»å–æ¶ˆæ¯çš„åº”ç”¨åœºæ™¯ä¸­é€‚ç”¨ï¼‰
                         autoDelete: false,         //å½“æœ€åä¸€ä¸ªæ¶ˆè´¹è€…(å¦‚æœæœ‰çš„è¯)é€€è®¢æ—¶ï¼Œæ˜¯å¦åº”è¯¥è‡ªåŠ¨åˆ é™¤è¿™ä¸ªé˜Ÿåˆ—?
                         arguments: null);          //å¯é€‰çš„;é¢å¤–çš„é˜Ÿåˆ—å‚æ•°ï¼Œä¾‹å¦‚:â€œx-queue-typeâ€
    //å®šä¹‰æ¶ˆæ¯å†…å®¹
    var message = "Hello RabbitMQ!";
    //è½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„ï¼ˆç¼–ç æ ¼å¼UTF-8ï¼‰
    var body = Encoding.UTF8.GetBytes(message);
    Console.WriteLine("æŒ‰ä»»æ„é”®å¼€å§‹å‘é€æ¶ˆæ¯ï¼");
    Console.ReadKey();
    //å¾ªç¯å‘é€ä¸€ç™¾æ¬¡æ¶ˆæ¯
    for(int i = 0; i < 100; i++)
    {
        /*
         * å‘ RabbitMQ æœåŠ¡å™¨å‘é€ä¸€æ¡æ¶ˆæ¯
         * è°ƒç”¨ BasicPublish æ–¹æ³•åï¼ŒæŒ‡å®šçš„æ¶ˆæ¯å†…å®¹å°±ä¼šè¢«å‘é€åˆ° RabbitMQ æœåŠ¡å™¨ï¼Œå¹¶æ ¹æ®æ‚¨æŒ‡å®šçš„è·¯ç”±é”®è¢«è·¯ç”±åˆ°ç›¸åº”çš„æ¶ˆæ¯é˜Ÿåˆ—ä¸­
         */
        channel.BasicPublish(exchange: "",                  //æŒ‡å®šè¦å°†æ¶ˆæ¯å‘å¸ƒåˆ°å“ªä¸ªäº¤æ¢æœºï¼ˆexchangeï¼‰ï¼Œè®¾ç½®ä¸ºç©ºå­—ç¬¦ä¸²ä»¥ä½¿ç”¨é»˜è®¤äº¤æ¢æœº
                             routingKey: "myTestQueue",     //æŒ‡å®šæ¶ˆæ¯çš„è·¯ç”±é”®ï¼ˆrouting keyï¼‰ï¼Œè·¯ç”±é”®ç”¨äºç¡®å®šæ¶ˆæ¯åº”è¯¥è¢«å‘é€åˆ°å“ªäº›æ¶ˆæ¯é˜Ÿåˆ—
                             basicProperties: null,         //æŒ‡å®šæ¶ˆæ¯å±æ€§ï¼Œå¯ä»¥ç”¨æ¥è®¾ç½®æ¶ˆæ¯çš„ä¼˜å…ˆçº§ã€è¿‡æœŸæ—¶é—´ç­‰å±æ€§
                             body: body);                   //æ¶ˆæ¯å†…å®¹ï¼Œå°†è¦å‘é€çš„æ•°æ®è½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„ï¼Œå¹¶ä¼ é€’ç»™è¿™ä¸ªå‚æ•°
        //æ§åˆ¶å°æ‰“å°å‘é€çš„æ¶ˆæ¯
        Console.WriteLine($"[{DateTime.Now.ToString("HH:mm:ss fff")}] Send: {message}");
        //å½“å‰çº¿ç¨‹æš‚åœä¸€ç§’é’Ÿ
        Thread.Sleep(1000);
    }
}
```

---

ä»¥ä¸‹æ˜¯ `RabbitMQConsumer` çš„ä»£ç ï¼š
```C#
using RabbitMQ.Client;
using RabbitMQ.Client.Events;
using System.Text;

//è¿æ¥ RabbitMQ å·¥å‚å®ä¾‹
var factory = new ConnectionFactory() { HostName = "localhost",     //ä¸»æœºåï¼Œé»˜è®¤ä¸º "localhost"
                                        Port = 5672,                //è¦è¿æ¥çš„ç«¯å£ï¼Œé»˜è®¤ä¸º -1(5672)
                                        UserName = "guest",         //ç”¨æˆ·åï¼Œé»˜è®¤ä¸º "guest"
                                        Password = "guest"};        //å¯†ç ï¼Œé»˜è®¤ä¸º "guest"
//åˆ›å»ºè¿æ¥å¯¹è±¡
var connection = factory.CreateConnection();
//åˆ›å»ºä¸€ä¸ªæ–°çš„é€šé“ã€ä¼šè¯å’Œæ¨¡å‹
var channel = connection.CreateModel();
//å£°æ˜ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—
channel.QueueDeclare(queue: "myTestQueue",      //æ¶ˆæ¯é˜Ÿåˆ—åç§°
                     durable: false,            //é˜Ÿåˆ—æ˜¯å¦èƒ½åœ¨ä»£ç†é‡å¯åä»ç„¶å­˜åœ¨
                     exclusive: false,          //æ˜¯å¦åº”è¯¥å°†æ­¤é˜Ÿåˆ—é™åˆ¶åœ¨å…¶å£°æ˜çš„è¿æ¥ä¸­?è¿™æ ·çš„é˜Ÿåˆ—å°†åœ¨å…¶å£°æ˜è¿æ¥å…³é—­æ—¶è¢«åˆ é™¤ã€‚ï¼ˆåœ¨ä¸€ä¸ªå®¢æˆ·ç«¯åŒæ—¶å‘é€å’Œè¯»å–æ¶ˆæ¯çš„åº”ç”¨åœºæ™¯ä¸­é€‚ç”¨ï¼‰
                     autoDelete: false,         //å½“æœ€åä¸€ä¸ªæ¶ˆè´¹è€…(å¦‚æœæœ‰çš„è¯)é€€è®¢æ—¶ï¼Œæ˜¯å¦åº”è¯¥è‡ªåŠ¨åˆ é™¤è¿™ä¸ªé˜Ÿåˆ—?
                     arguments: null);          //å¯é€‰çš„;é¢å¤–çš„é˜Ÿåˆ—å‚æ•°ï¼Œä¾‹å¦‚:â€œx-queue-typeâ€

//åˆ›å»ºï¼ˆå°† IBasicConsumer æ¥å£å®ç°ä¸ºäº‹ä»¶çš„ï¼‰EventingBasicConsumer ç±»å¯¹è±¡å¹¶å…³è”æŒ‡å®šçš„ channel
var consumer = new EventingBasicConsumer(channel);
/* 
 * å¯åŠ¨ä¸€ä¸ªåŸºæœ¬çš„å†…å®¹ç±»æ¶ˆè´¹è€…ï¼ˆåœ¨å½“å‰é€šé“ä¸­ç›‘å¬ myTestQueue æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå¹¶è¿›è¡Œæ¶ˆè´¹ï¼‰
 * è°ƒç”¨ BasicConsume æ–¹æ³•åï¼Œæ‚¨çš„åº”ç”¨ç¨‹åºå°±å¯ä»¥å¼€å§‹ä»æŒ‡å®šçš„æ¶ˆæ¯é˜Ÿåˆ—ä¸­æ¥æ”¶æ¶ˆæ¯äº†ã€‚
 * å½“ä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­æ¥æ”¶åˆ°ä¸€æ¡æ¶ˆæ¯æ—¶ï¼Œæ¶ˆè´¹è€…å¯¹è±¡çš„ Received äº‹ä»¶ä¼šè¢«è§¦å‘ï¼Œå¹¶æ‰§è¡Œç›¸åº”çš„äº‹ä»¶å¤„ç†ç¨‹åºã€‚
 */
channel.BasicConsume(queue: "myTestQueue",      //æ¶ˆæ¯é˜Ÿåˆ—åç§°
                     autoAck: true,             //æ˜¯å¦è‡ªåŠ¨å‘é€ç¡®è®¤æ¶ˆæ¯ï¼ˆacknowledgementï¼‰ç»™ RabbirMQ æœåŠ¡å™¨
                     consumer: consumer);       //æŒ‡å®šç”¨äºæ¥æ”¶æ¶ˆæ¯çš„æ¶ˆè´¹è€…å¯¹è±¡

//ä½¿ç”¨ Lambda è¡¨è¾¾å¼æ³¨å†Œäº‹ä»¶å¤„ç†ç¨‹åºå¹¶è®¢é˜… Received äº‹ä»¶
consumer.Received += (sender, e) =>
{
    var body = e.Body.ToArray();                                                                        //è·å–æ¶ˆæ¯å­—èŠ‚æ•°ç»„
    var message = Encoding.UTF8.GetString(body);                                                        //UTF-8æ ¼å¼ç¼–ç æ¶ˆæ¯å†…å®¹å­—ç¬¦ä¸²
    Console.WriteLine($"[{DateTime.Now.ToString("HH:mm:ss fff")}] Consumer Received: {message},");      //æ§åˆ¶å°æ‰“å°æ¶ˆæ¯å†…å®¹ï¼ˆæ‚¨ä¹Ÿå¯ä»¥åœ¨è¿™é‡Œæ·»åŠ å…¶ä»–çš„æ¶ˆæ¯å¤„ç†ä»£ç ï¼‰
};
//æ§åˆ¶å°ç­‰å¾…è¯»å–è¾“å…¥ä»¥é¿å…è¿›ç¨‹é€€å‡º
Console.ReadLine();
//å…³é—­è¿æ¥ä»¥åŠå®ƒçš„æ‰€æœ‰é€šé“
connection.Close();
```

---

è¿è¡Œæ•ˆæœï¼š<br>![](./image/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B5%8B%E8%AF%95/4-%E6%B5%8B%E8%AF%95%E6%95%88%E6%9E%9C.gif)

# 7ã€Q&A

## Qï¼šVisual Studio å¦‚ä½•åŒæ—¶è¿è¡Œä¸¤ä¸ªé¡¹ç›®

**A1ï¼š** 
1. åœ¨è§£å†³æ–¹æ¡ˆèµ„æºç®¡ç†å™¨ä¸­ï¼Œå³å‡»è§£å†³æ–¹æ¡ˆèŠ‚ç‚¹ï¼Œç„¶åé€‰æ‹©â€œå±æ€§â€ï¼›<br>![](./image/Q%26A/1-%E5%B1%9E%E6%80%A7.PNG)
2. å±•å¼€â€œé€šç”¨å±æ€§â€èŠ‚ç‚¹ï¼Œç„¶åé€‰æ‹©â€œå¯åŠ¨é¡¹ç›®â€ï¼Œé€‰æ‹©â€œå¤šä¸ªå¯åŠ¨é¡¹ç›®â€é€‰é¡¹å¹¶è®¾ç½®é€‚å½“çš„æ“ä½œã€‚ç„¶åç‚¹å‡»åº”ç”¨ï¼›<br>![](./image/Q%26A/2-%E8%AE%BE%E7%BD%AE%E5%A4%9A%E4%B8%AA%E5%90%AF%E5%8A%A8%E9%A1%B9%E7%9B%AE.PNG)

**A2ï¼š** æˆ–è€…æ›´ç®€å•çš„ï¼Œæ‰“å¼€ä¸¤ä¸ª Visual Studio å°±å¥½å•¦~

## Qï¼šæˆ‘å¯ä»¥åœ¨ç¬¬ä¸€å°è®¡ç®—æœºä¸Šè¿è¡Œæ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡å™¨ï¼Œç¬¬äºŒå°è®¡ç®—æœºä¸Šè¿è¡Œå‘é€æ¶ˆæ¯çš„ç¨‹åºï¼Œç¬¬ä¸‰å°è®¡ç®—æœºä¸Šè¿è¡Œæ¥æ”¶æ¶ˆæ¯çš„ç¨‹åºå—ï¼Ÿ

**Aï¼š** å¯ä»¥ï¼Œåªè¦è¿™äº›å¹³å°ä¹‹é—´èƒ½å¤Ÿç›¸äº’é€šä¿¡ï¼ˆå¤„äºåŒä¸€å±€åŸŸç½‘å†…ï¼‰ï¼Œå®ƒä»¬å°±å¯ä»¥ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—è¿›è¡Œé€šä¿¡ã€‚åŒæ—¶è¿™ä¹Ÿæ„å‘³ç€ï¼Œåœ¨å‘é€å’Œæ¥æ”¶æ¶ˆæ¯çš„ç¨‹åºä»£ç ä¸­ï¼Œæ‚¨éœ€è¦æŒ‡å®š RabbitMQ æœåŠ¡å™¨æ‰€åœ¨çš„è®¡ç®—æœºçš„ IP åœ°å€æˆ–ä¸»æœºåï¼Œä»¥ä¾¿è¿æ¥åˆ° RabbitMQ æœåŠ¡å™¨ã€‚<br>ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨çš„æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡å™¨è¿è¡Œåœ¨ IP åœ°å€ä¸º **192.168.1.100** çš„è®¡ç®—æœºä¸Šï¼Œæ‚¨éœ€è¦ä½¿ç”¨å¦‚ä¸‹ä»£ç æ¥åˆ›å»º `ConnectionFactory` å¯¹è±¡ï¼š
```C#
var factory = new ConnectionFactory() { HostName = "192.168.1.100" };
```
> ğŸ’¬ æœ‰å…³è¿œç¨‹éƒ¨ç½² RabbitMQ æœåŠ¡çš„ç›¸å…³å†…å®¹æ‚¨å¯ä»¥ç‚¹å‡»[è¿™é‡Œ](https://www.cnblogs.com/abeam/p/11872956.html)äº†è§£æ›´å¤šã€‚